from openai_client import extract_structured_data

# Sample text input for testing
sample_text = """
{'text': 'עמוד 1 מתוך 2\nתאריך מילוי הטופס\n2| 501 20 2 3\nתאריך קבלת הטופס בקופה 0|202 199 9 יום חודש\nהמוסד לביטוח לאומי מינהל הגמלאות\nיום\nחודש\nשנה\nשנה\nבקשה למתן טיפול רפואי לנפגע עבודה - עצמאי אל קופ״ח/ביה״ח _ מאיר כפס נא עיין בדברי ההסבר שבעמוד 2 לפני מילוי הטופס\nיום חודש\nשנה\nתאריך הפגיעה 1 | 6 0| 4 2 |0 2 2\n1\nת.ז.\nס״ב\n8| 7| 7 | 5 | 2 |4 5 6 3\nשם פרטי\nפרטי התובע\n2\nשם משפחה\n1 יהודה\nחודש יום\n0|2 0 219 9 5\nשנה\nתאריך לידה :unselected: טננהוים :unselected: נקבה :selected: זכר\nכתובת\nמין\nמיקוד\nיישוב\nדירה\nכניסה\nמס׳ בית\n312422\nאבן יהודה\n12\n1\n16\nרחוב / תא דואר הרמבם\nטלפון נייד\nטלפון קווי\nC\n0502|4|7|494 7\nפרטי התאונה\n3\nאני מבקש לקבל עזרה רפואית בגין פגיעה בעבודה שארעה לי\nמלצרות\nכאשר עבדתי ב\n19:00\nבשעה\n16.04.2022\nבתאריך\nסוג העבודה :unselected: אחר :unselected: תאונה בדרך ללא רכב :unselected: ת. דרכים בדרך לעבודה/מהעבודה :unselected: ת. דרכים בעבודה :selected: במפעל\nמקום התאונה:\nכתובת מקום התאונה\nהורדים 8, תל אביב\nהחלקתי בגלל שהרצפה הייתה רטובה ולא היה שום שלט שמזהיר.\nנסיבות הפגיעה / תאור התאונה\nהאיבר שנפגע יד שמאל\nהצהרה\n4\nאני החתום מטה מצהיר כי אני רשום במוסד כעובד עצמאי וכי כל הפרטים שמסרתי לעיל הם נכונים ומלאים. ידוע לי שמסירת פרטים לא נכונים או העלמת נתונים מהווים עבירה על החוק. ידוע לי שאם התביעה לא תוכר ע״י המוסד לביטוח לאומי - קופת החולים רשאית לחייב אותי בהוצאות הטיפול\nהרפואי.\nחתימה\nטננהוים יהודה\nשם המבקש\nלמילוי ע״י המוסד הרפואי\n5 :unselected: לאומית :unselected: מכבי\nמאוחדת :selected: :unselected: כללית :unselected: הנפגע חבר בקופת חולים :unselected: הנפגע אינו חבר בקופת חולים :unselected: מהות התאונה (אבחנות רפואיות):\nטופס זה מנוסח בלשון זכר אך פונה לנשים וגברים כאחד\nבל/ 283 (05.2010)\nעצמאי נכבד\nעמוד 2 מתוך 2\nעובד עצמאי שנפגע בעבודתו (או בדרכו הישירה לעבודתו וממנה), זכאי לטיפול רפואי על חשבון הביטוח הלאומי. תנאי לקבלת טיפול רפואי כאמור הוא, שהינך רשום במוסד כעובד עצמאי. לשם קבלת הטיפול הרפואי עליך לפנות לקופת החולים בה הינך חבר (שירותי בריאות כללית, קופ״ח לאומית, קופ״ח\nמאוחדת, מכבי שירותי בריאות).\nרק במקרה של צורך דחוף ולשם הגשת עזרה ראשונה בלבד, מותר לפנות חדר מיון או לשירות רפואי קרוב אחר. המשך הטיפול הרפואי יינתן אך ורק ע״י השירות הרפואי המוסמך (קופות החולים) אשר יחזיר לך את הוצאותיך בעד\nהטיפול הראשוני.\nאין מחזירים הוצאות בעד כל טיפול נוסף שניתן ע"י שירות רפואי לא מוסמך.\nלא יוחזרו הוצאות טיפול רפואי פרטי y לקבלת הטיפול הרפואי בקופת חולים עליך למלא טופס זה יש למלא את הטופס על כל פרטיו, ובמיוחד להקפיד על מילוי נכון של פרטיך האישיים, תאריך הפגיעה, שעת הפגיעה ושם קופת החולים בה הינך חבר. אין להשתמש בטופס זה במקרים של מחלה רגילה או תאונה שהתרחשה שלא במסגרת העבודה. שימוש בטופס זה שלא כדין יחייב אותך בתשלום תמורת הטיפול הרפואי. טופס זה אינו מהווה אישור הכרה בפגיעהכפגיעה בעבודה, וההחלטה על כך היא בידי המוסד לביטוח לאומי. לתשומת לבך! מסירת פרטים לא נכונים או העלמת מידע מהווים עבירה על החוק.\nבל/ 283 (05.2010)', 'tables': ['מיקוד - 312422\nיישוב - אבן יהודה\nדירה - 12\nכניסה - 1\nמס׳ בית - 16']}
"""

# Call the function and print the result
response = extract_structured_data(sample_text)

# Print the extracted data
print("Extracted Data:", response)
